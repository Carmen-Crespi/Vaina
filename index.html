<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Para David</title>
    <style>
        body { margin: 0; background: #111; overflow: hidden; font-family: sans-serif; }
        canvas { display: block; }
    </style>
</head>
<body>
    <canvas id="c"></canvas>

    <script>
        var canvas = document.getElementById('c');
        var ctx = canvas.getContext('2d');
        var w = canvas.width = window.innerWidth;
        var h = canvas.height = window.innerHeight;

        var opts = {
            phrases: [ 
                "Te quiero\nDavid", "Que tengas un\nlindo día hoy", 
                "Existo en la\ngrabación", "CuídateMucho", 
                "Mi negro\nfavorito", "Ni he esuchado la cancion", "A veces eres\nmedio gruñón",
                "Esto es\ndemasiado cursi", "Pandas", "Panditas", "Pandas", 
                "TE QUIERO", "PANDAS", "Love",  "Te quiero\nDavid", 
                "Que todo te salga muy bien","Luego me cuentas como te fue, con lujo y detalles",
                "No se que mas escribir", "Soy mas romantica que tu, y esto lo demuestra",
                "DARC", "Bajale dos rayitas\na tu malandreo", "Queria hacer algo cool, pero el tiempo y luz no colaboro",
                " Si esto no es amor entonces soy un loc@ sin motivo- Can","Se te quiere bonito","No se que mas escribir", 
                "Bye"
            ],
            balloons: 12,
            baseSize: 35,  
            addedSize: 15,
            baseVelY: -1.2,
            // Cambiamos el color base a 0 (Rojo en el sistema HSL)
            baseHue: 0 
        };

        var balloons = [];
        var cycle = 0;

        function Balloon() {
            this.reset();
        }

        Balloon.prototype.reset = function() {
            this.size = opts.baseSize + Math.random() * opts.addedSize;
            this.x = Math.random() * w;
            this.y = h + this.size + 100;
            this.vx = -0.5 + Math.random();
            this.vy = opts.baseVelY - Math.random();
            this.tick = Math.random() * 100;
            
            // MODIFICACIÓN: Color rojo fijo con una ligera variación de brillo
            // 0 es rojo puro. 80% es la saturación. 50% es el brillo.
            this.color = 'hsla(0, 85%, ' + (40 + Math.random() * 20) + '%, .9)';
            
            this.phrase = opts.phrases[cycle % opts.phrases.length].split('\n');
            cycle++;
        };

        Balloon.prototype.step = function() {
            this.tick += 0.03;
            this.x += this.vx;
            this.y += this.vy;
            var size = this.size + 5 * Math.sin(this.tick);

            // 1. Dibujar el Hilo
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(this.x, this.y + size);
            ctx.lineTo(this.x, this.y + size + 40);
            ctx.stroke();

            // 2. Dibujar el CORAZÓN (Color Rojo)
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.moveTo(this.x, this.y);
            ctx.bezierCurveTo(this.x, this.y - size/2, this.x - size, this.y - size/2, this.x - size, this.y);
            ctx.bezierCurveTo(this.x - size, this.y + size/1.5, this.x, this.y + size, this.x, this.y + size * 1.3);
            ctx.bezierCurveTo(this.x, this.y + size, this.x + size, this.y + size/1.5, this.x + size, this.y);
            ctx.bezierCurveTo(this.x + size, this.y - size/2, this.x, this.y - size/2, this.x, this.y);
            ctx.fill();

            // 3. Dibujar el Texto
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 16px Verdana';
            ctx.textAlign = 'center';
            for (var i = 0; i < this.phrase.length; i++) {
                ctx.fillText(this.phrase[i], this.x, this.y + size + 60 + (i * 20));
            }

            if (this.y < -200) this.reset();
        };

        function anim() {
            ctx.fillStyle = '#111';
            ctx.fillRect(0, 0, w, h);
            if (balloons.length < opts.balloons && Math.random() < 0.01) balloons.push(new Balloon());
            balloons.forEach(b => b.step());
            requestAnimationFrame(anim);
        }

        window.addEventListener('resize', function() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        });

        anim();
    </script>
</body>
</html>